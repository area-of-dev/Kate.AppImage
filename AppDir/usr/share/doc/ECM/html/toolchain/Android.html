

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>AndroidToolchain &mdash; Extra CMake Modules 5.27.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/ecm.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.27.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/kde-favicon.ico"/>
    <link rel="top" title="Extra CMake Modules 5.27.0 documentation" href="../index.html" />
    <link rel="up" title="ecm-toolchains(7)" href="../manual/ecm-toolchains.7.html" />
    <link rel="prev" title="ecm-toolchains(7)" href="../manual/ecm-toolchains.7.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../manual/ecm-toolchains.7.html" title="ecm-toolchains(7)"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">ECM 5.27 documentation</a> &raquo;</li>
          <li><a href="../manual/ecm-toolchains.7.html" accesskey="U">ecm-toolchains(7)</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="androidtoolchain">
<span id="toolchain:Android"></span><h1>AndroidToolchain<a class="headerlink" href="#androidtoolchain" title="Permalink to this headline">¶</a></h1>
<p>Enable easy compilation of cmake projects on Android.</p>
<p>By using this android toolchain, the projects will be set up to compile the
specified project targeting an Android platform, depending on its input.
Furthermore, if desired, an APK can be directly generated by using the
<a class="reference external" href="http://doc.qt.io/qt-5/deployment-android.html">androiddeployqt</a> tool.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This module requires CMake 3.1.</p>
</div>
<p>Since 1.7.0.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>To use this file, you need to set the <tt class="docutils literal"><span class="pre">CMAKE_TOOLCHAIN_FILE</span></tt> to point to
<tt class="docutils literal"><span class="pre">AndroidToolchain.cmake</span></tt> on the command line:</p>
<div class="highlight-python"><pre>cmake -DCMAKE_TOOLCHAIN_FILE=/usr/share/ECM/toolchain/AndroidToolchain.cmake</pre>
</div>
<p>You will also need to provide the locations of the Android NDK and SDK. This
can be done on the commandline or with environment variables; in either case
the variable names are:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ANDROID_NDK</span></tt></dt>
<dd>The NSK root path.</dd>
<dt><tt class="docutils literal"><span class="pre">ANDROID_SDK_ROOT</span></tt></dt>
<dd>The SDK root path.</dd>
</dl>
<p>Additional options are specified as cache variables (eg: on the command line):</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ANDROID_ARCHITECTURE</span></tt></dt>
<dd>The architecture to compile for. Default: <tt class="docutils literal"><span class="pre">arm</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">ANDROID_TOOLCHAIN</span></tt></dt>
<dd>The toolchain to use. See the <tt class="docutils literal"><span class="pre">toolchains</span></tt> directory of the NDK.
Default: <tt class="docutils literal"><span class="pre">arm-linux-androideabi</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">ANDROID_ABI</span></tt></dt>
<dd>The ABI to use. See the <tt class="docutils literal"><span class="pre">sources/cxx-stl/gnu-libstdc++/*/libs</span></tt>
directories in the NDK. Default: <tt class="docutils literal"><span class="pre">armeabi-v7a</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">ANDROID_GCC_VERSION</span></tt></dt>
<dd>The GCC version to use. Default: <tt class="docutils literal"><span class="pre">4.9</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">ANDROID_API_LEVEL</span></tt></dt>
<dd>The <a class="reference external" href="http://developer.android.com/guide/topics/manifest/uses-sdk-element.html">API level</a>
to require. Default: <tt class="docutils literal"><span class="pre">14</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">ANDROID_SDK_BUILD_TOOLS_REVISION</span></tt></dt>
<dd>The build tools version to use. Default: <tt class="docutils literal"><span class="pre">21.1.1</span></tt>.</dd>
</dl>
</div>
<div class="section" id="deploying-qt-applications">
<h2>Deploying Qt Applications<a class="headerlink" href="#deploying-qt-applications" title="Permalink to this headline">¶</a></h2>
<p>After building the application, you will need to generate an APK that can be
deployed to an Android device. This module integrates androiddeployqt support
to help with this for Qt-based projects. To enable this, set the
<tt class="docutils literal"><span class="pre">QTANDROID_EXPORTED_TARGET</span></tt> variable to the target you wish to export as an
APK, as well as <tt class="docutils literal"><span class="pre">ANDROID_APK_DIR</span></tt> to a directory containing some basic
information. This will create a <tt class="docutils literal"><span class="pre">create-apk-&lt;target&gt;</span></tt> target that will
generate the APK file.  See the <a class="reference external" href="http://doc.qt.io/qt-5/deployment-android.html">Qt on Android deployment documentation</a> for more information.</p>
<p>For example, you could do:</p>
<div class="highlight-python"><pre>cmake \
  -DCMAKE_TOOLCHAIN_FILE=/usr/share/ECM/toolchain/AndroidToolchain.cmake \
  -DQTANDROID_EXPORTED_TARGET=myapp \
  -DANDROID_APK_DIR=myapp-apk
make
make create-apk-myapp</pre>
</div>
<p>The APK would then be found in <tt class="docutils literal"><span class="pre">myapp_build_apk/bin</span></tt> in the build directory.</p>
<p>The create-apk-myapp target will be able to take an ARGS parameter with further
arguments for androiddeployqt. For example, one can use:</p>
<div class="highlight-python"><pre>make create-apk-myapp ARGS="--install"</pre>
</div>
<p>To install the apk to test. To generate a signed apk, one can do it with the
following syntax:</p>
<div class="highlight-python"><pre>make create-apk-myapp ARGS="--sign ~/my.keystore alias_name"</pre>
</div>
<p>See Android documentation on how to create a keystore to use</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">AndroidToolchain</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#deploying-qt-applications">Deploying Qt Applications</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../manual/ecm-toolchains.7.html"
                        title="previous chapter">ecm-toolchains(7)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/toolchain/Android.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../manual/ecm-toolchains.7.html" title="ecm-toolchains(7)"
             >previous</a> |</li>
        <li><a href="../index.html">ECM 5.27 documentation</a> &raquo;</li>
          <li><a href="../manual/ecm-toolchains.7.html" >ecm-toolchains(7)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright KDE Developers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>